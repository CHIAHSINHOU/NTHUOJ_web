{% extends "index/base.html" %}
{% load static %}

{% block body_block %}
{% regroup submission_details by sid as submissions %}
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/dark-hive/jquery-ui.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script type="text/javascript">
  $(function () {
    $(document).tooltip({
      track: true
    });
  })
</script>


<div class="jumbotron" style="width:95%;margin:auto;">
  <h1>Status</h1>
  <table class="table table-striped table-hover ">
    <thead>
      <tr>
        <th>SID</th>
        <th>Submit Time</th>
        <th>Username</th>
        <th>Problem</th>
        <th>Status</th>
        <th>Source</th>
      </tr>
    </thead>
    <tbody>
      {% for submission in submissions %}
        <tr title="
          <ol style='margin:15px'>
            {% for detail in submission.list %}
              <li class='row'>{{ detail.virdect_full }} CPU: {{ detail.cpu}}</li>
            {% endfor %}
          </ol>"
          class={% if submission.grouper.status == "AC" %} 
          "success" {% else %} "danger" {% endif %}>

          <th>{{ submission.grouper.id }}</th>
          <th>{{ submission.grouper.submit_time }}</th>
          <th>{{ submission.grouper.user }}</th>
          <th>{{ submission.grouper.problem }}</th>
          <th>
            {% if submission.grouper.status == "CE" or submission.grouper.status == "RF" %}
              <a class="ajax-popup-link" href={% url "error_message" submission.grouper.id %}>
                {{ submission.grouper.status_full }}
              </a>
            {% else %}
              {{ submission.grouper.status_full }}
            {% endif %}
          </th>
          <th>{{ submission.grouper.language_full }}</th>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock body_block %}
